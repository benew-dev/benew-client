@use '../../../app/styles/abstracts' as *;

// ================================
// üìÑ _music-button.scss - Bouton de musique dans la navbar
// ================================

// =============================
// BOUTON DE MUSIQUE - STRUCTURE DESKTOP
// =============================
.desktop-structure {
  .social {
    // Le bouton musique prend sa place dans la grille existante
    .music-button {
      background: transparent;
      border: none;
      cursor: pointer;
      padding: 0.5rem; // Zone tactile plus grande
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;

      &:hover {
        transform: scale(1.1) rotate(5deg);
        background: rgba(css-var(primary-color), 0.1);
      }

      &:focus {
        outline: 2px solid css-var(primary-color);
        outline-offset: 2px;
      }

      .music-icon {
        // M√™me taille que les social-icon pour coh√©rence
        width: 1rem;
        height: 1rem;
        transition: all 0.3s ease;
        filter: grayscale(0.3);
        color: css-var(text-color-muted);

        &:hover {
          filter: grayscale(0) hue-rotate(20deg) brightness(1.2);
          color: css-var(primary-color);
        }

        // üñ•Ô∏è TABLET ET PLUS - R√©duction progressive (coh√©rent avec social-icon)
        @include from('medium-sm') {
          width: 1.4rem;
          height: 1.4rem;
        }
      }

      // Effet hover sur le bouton applique aussi √† l'ic√¥ne
      &:hover .music-icon {
        filter: grayscale(0) hue-rotate(20deg) brightness(1.2);
        color: css-var(primary-color);
      }

      // √âtats sp√©ciaux pour indiquer le statut audio
      &.audio-available {
        .music-icon {
          color: css-var(primary-color);
          filter: grayscale(0);
        }
      }

      &.audio-unavailable {
        .music-icon {
          color: css-var(text-color-muted);
          filter: grayscale(0.7);
        }

        &:hover {
          transform: scale(1.05); // Moins d'animation si indisponible

          .music-icon {
            color: css-var(text-color);
            filter: grayscale(0.5);
          }
        }
      }

      &.audio-playing {
        .music-icon {
          color: css-var(secondary-color);
          filter: grayscale(0) hue-rotate(45deg) brightness(1.3);
          animation: musicPulse 2s ease-in-out infinite;
        }
      }
    }
  }
}

// =============================
// BOUTON DE MUSIQUE - STRUCTURE MOBILE
// =============================
.mobile-structure {
  .mobile-music-container {
    .mobile-music-button {
      // Styles d√©j√† d√©finis dans _mobile-structure.scss
      // Ajout d'overrides sp√©cifiques si n√©cessaire

      // Zone tactile optimis√©e pour mobile
      min-width: 44px;
      min-height: 44px;

      .mobile-music-icon {
        // L'ic√¥ne mobile est plus grande pour une meilleure utilisabilit√© tactile
        // Taille d√©j√† d√©finie dans _mobile-structure.scss (2.2rem)
        width: 1.2rem;
        height: 1.2rem;
      }
    }
  }
}

// =============================
// ANIMATIONS POUR LE BOUTON MUSIQUE
// =============================
@keyframes musicPulse {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

// =============================
// ADAPTATIONS RESPONSIVE
// =============================

// Tablettes moyennes - espacement r√©duit (coh√©rent avec la navbar)
@include between('medium-sm', 'medium-lg') {
  .desktop-structure .social .music-button {
    padding: 0.35rem; // Padding r√©duit comme les autres √©l√©ments
  }
}

// Mode paysage mobile - ajustements pour le bouton mobile
@include mobile-landscape {
  .mobile-structure .mobile-music-container .mobile-music-button {
    .mobile-music-icon {
      width: 1.8rem; // L√©g√®rement r√©duit en paysage
      height: 1.8rem;
    }
  }
}

// =============================
// ACCESSIBILIT√â ET UX
// =============================

// Zone tactile minimale recommand√©e (44px) pour √©crans tactiles
@media (pointer: coarse) {
  .desktop-structure .social .music-button,
  .mobile-structure .mobile-music-container .mobile-music-button {
    min-width: 44px;
    min-height: 44px;
    padding: 0.6rem;
  }
}

// R√©duction de mouvement
@include reduced-motion {
  .desktop-structure .social .music-button,
  .mobile-structure .mobile-music-container .mobile-music-button {
    &:hover {
      transform: none !important;
    }

    .music-icon,
    .mobile-music-icon {
      &.audio-playing {
        animation: none !important;
      }
    }
  }
}

// Mode contraste √©lev√©
@include high-contrast {
  .desktop-structure .social .music-button,
  .mobile-structure .mobile-music-container .mobile-music-button {
    border: 1px solid rgba(css-var(text-color), 0.2);

    &:hover {
      border-color: rgba(css-var(primary-color), 0.5);
    }

    &:focus {
      border-color: css-var(primary-color);
    }
  }
}
